import{Q as g,T as b,m as y,o as l,c as i,b as e,a as w,e as v,g as C,F as B,r as k,i as P,p as S,u as r,t as s}from"./app-CkuosRbL.js";import{S as V}from"./sweetalert2.all-CNZ3tukp.js";const j={class:"text-lg font-bold text-zinc-800"},N={class:"mt-6 space-y-6"},$=e("div",{class:"flex flex-col"},[e("h5",{class:"font-bold text-gray-900 text-md"}," Select your new plan "),e("p",{class:"mt-1 text-sm text-gray-600"}," You can cancel new plan any time. ")],-1),D={class:"flex flex-col gap-3"},F={class:"flex"},T={class:"flex items-center"},U=["name","value","onUpdate:modelValue","checked"],I={class:"ml-2 text-lg font-bold text-stone-700"},M=e("br",null,null,-1),O={class:"ml-2 font-light text-stone-400"},Y=e("div",{class:"flex items-center justify-between gap-4 mt-4"},[e("button",{class:"inline-flex items-center px-4 py-2 text-xs font-semibold tracking-widest text-teal-600 uppercase transition duration-150 ease-in-out border border-teal-600 rounded-md hover:outline-none hover:bg-teal-600 hover:text-white",type:"submit"}," Choose Plan ")],-1),L={__name:"ChangePlan",props:{userPlan:{type:Object},showSubscriptionForm:{type:Boolean,default:!1},plans:{type:Object}},setup(c){const d=c;g().props.auth.user;const a=b({plan:d.userPlan.plan.plan_id}),f=async()=>{await V.fire({title:"Are you sure?",text:"Do you want to change the plan?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, change plan"}).then(n=>{n.isConfirmed&&h()})},h=async()=>{const n=d.plans.find(o=>o.id===parseInt(a.plan));if(n){const o=`/plans/redirect?status=change_plan&external_id=${n.external_id}&plan_id=${n.id}`;window.location.href=o}else console.error("No plan selected")};return(n,o)=>{const x=y("font-awesome-icon");return l(),i("section",null,[e("header",null,[e("h2",j,[e("button",{class:"mr-4 text-gray-900",onClick:o[0]||(o[0]=t=>n.$emit("toggle-subscription-form"))},[w(x,{icon:"fa-solid fa-arrow-left"})]),v(" Change Subscription Plan ")])]),e("div",N,[$,e("div",D,[e("form",{onSubmit:C(f,["prevent"])},[(l(!0),i(B,null,k(c.plans,(t,z)=>{var u,p,m;return l(),i("div",{class:"flex flex-row justify-between",key:t.id},[e("div",F,[e("label",T,[P(e("input",{type:"radio",name:t,value:t.id,"onUpdate:modelValue":_=>r(a).plan=_,checked:parseInt(r(a).plan)===t.id,class:"w-5 h-5 text-blue-600 form-radio"},null,8,U),[[S,r(a).plan]]),e("div",null,[e("span",I,s((u=t.name)==null?void 0:u.en),1),M,e("span",O,s(t.charge.prices[0].amount)+" "+s(t.charge.prices[0].currency)+" / "+s((p=t.charge.period)==null?void 0:p.value)+" "+s((m=t.charge.period)==null?void 0:m.type),1)])])])])}),128)),Y],32)])])])}}};export{L as default};
